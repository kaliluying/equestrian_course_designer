import{u as e,a,b as o,T as s,C as n,P as t,_ as r}from"./index.js";import{x as l,r as c,k as i,S as d,z as m,P as u,y as p}from"./vendor.js";import"./element-plus.js";const v={class:"home-container"},f=r(l({__name:"Home",setup(r,{expose:l}){const f=c(null),g=o(),b=e(),I=a(),h=c(!1);i((()=>{console.log("Home.vue已挂载，初始化事件监听器"),"collaborate"===g.name&&g.params.designId&&x();const e=()=>{h.value=!1},a=()=>{h.value=!0};document.addEventListener("collaboration-stopped",e),document.addEventListener("collaboration-connected",a),d((()=>{document.removeEventListener("collaboration-stopped",e),document.removeEventListener("collaboration-connected",a)}))}));const x=()=>{return e=this,a=function*(){if(!g.params.designId)return;const e=g.params.designId;if(console.log("协作路由包含设计ID:",e),!I.isAuthenticated)return console.log("用户未登录，存储协作信息"),void localStorage.setItem("pendingCollaboration",JSON.stringify({designId:e,timestamp:Date.now()}));b.setCurrentCourseId(e)},new Promise(((o,s)=>{var n=e=>{try{r(a.next(e))}catch(o){s(o)}},t=e=>{try{r(a.throw(e))}catch(o){s(o)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,t);r((a=a.apply(e,null)).next())}));var e,a};return l({canvasRef:f}),(e,a)=>(p(),m("div",v,[u(s,{class:"toolbar"}),u(n,{class:"canvas",ref_key:"canvasRef",ref:f},null,512),u(t,{class:"properties-panel"})]))}}),[["__scopeId","data-v-ba88cfe4"]]);export{f as default};
